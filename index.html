<!DOCTYPE HTML>
<html>
	<head>
		<link href='http://fonts.googleapis.com/css?family=Actor' rel='stylesheet' type='text/css'>
		<meta name="description" content="The Struggle Bus"/>
		<meta name="keywords" content="Struggle, Bus, Penn, UPenn, PennApps"/>

		<title>The Struggle Bus</title>


		<!-- CSS -->
		<link href="css/style.css" rel="stylesheet">
		<!-- JS -->
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="js/bus.js"></script>

		<script>
			var imgArray = new Array();

			imgArray[0] = new Image();
			imgArray[0].src = 'images/Bus1.gif';

			imgArray[1] = new Image();
			imgArray[1].src = 'images/Bus1LOOP.gif';

			imgArray[2] = new Image();
			imgArray[2].src = 'images/Bus2.gif';

			imgArray[3] = new Image();
			imgArray[3].src = 'images/Bus2LOOP.gif';

			imgArray[4] = new Image();
			imgArray[4].src = 'images/Bus3.gif';

			imgArray[5] = new Image();
			imgArray[5].src = 'images/Bus3LOOP.gif';

			imgArray[6] = new Image();
			imgArray[6].src = 'images/Bus4.gif';

			imgArray[7] = new Image();
			imgArray[7].src = 'images/Bus4LOOP.gif';

			imgArray[8] = new Image();
			imgArray[8].src = 'images/Bus5.gif';

			imgArray[9] = new Image();
			imgArray[9].src = 'images/BusFinalLOOP.gif';

			var i=0;

			function putgif(gif1, gif2) {
				console.log("GIF1: ", gif1, ", ", "GIF2: ", gif2)
    			$("#bus_container").attr('src', gif1);
    			$("#bus_container").delay(3500).queue(function() {
    				$(this).attr('src', gif2);
    				$(this).dequeue();
    			})
    			/*if (i>) { //whatever last image is--run it through and go to end screen
					$("#bus_container").hide();
					$("#end").show();

				}*/
    		} 	

    		function slideScreen(curr, next) {
  				curr.hide();
  				next.css("visibility", "visible");
  				next.fadeIn();
			}
		
			function addtext() {
				if(i==10){
					//$("#end").show();
					$("#bus_container").hide();
					$("form").hide();
					slideScreen($("#main"), $("#end"));

				}
	

   				var inp = document.getElementById('input').value; 
   				if (inp == "") return;
    			inp = '<p>'+inp+'</p>';
     			$(inp).appendTo('#list_of_struggles');
     			document.getElementById('input').value = "";
     			putgif(imgArray[i].src, imgArray[i+1].src);
   
     			i+=2;     			
    		}

    	</script>

	</head>

	<body style="position: absolute; left: 0px; top: 0px">

		<embed height="1" width="1" style="left: -50px; top: -50px;" src="struggle_Bus.mp3">

		<!-- welcome screen -->
		<div id="welcome">
			<p><h1 class="message1">Now boarding the struggle bus.</h1></p>
			<p><h1 class="message2">Click to ride. >></h1></p>
		</div>

		<!-- main screen -->
		<div id="main">
			<table>
				<tbody>
					<tr>
						<td>
							<h2 class="heading">Enter Your Struggle.</h2>
						</td>
						<td>
	            			<form onSubmit="return false;">
	            				<input type="text" id="input" onkeypress = "if (event.keyCode == 13){ document.getElementById('inputbox').click();}"/>
	            				<input type="button" id="inputbox" value="Go" onclick="addtext();"/>
	            			</form>
	            		</td>
	            	</tr>
	            	<tr>
	            		<td>
	            			<div id="list_of_struggles"></div>
	            		</td>

	            		<td>
	            			<img id="bus_container" src="images/Bus0LOOP.gif"/>
	            		</td>
	            	</tr>
	            </tbody>
	        </table>

  
		</div>

		<!-- end -->
		<div id="end">
			<p id="overload">TOO MANY STRUGGLES</p>
			<p><h1 class="endmessage">Start over. >></h1></p>
			<h5>Created by Becca, Grace, Stefanie, and Teresa for PennApps Fall 2013</h5>
		</div>

	</body>

</html>
